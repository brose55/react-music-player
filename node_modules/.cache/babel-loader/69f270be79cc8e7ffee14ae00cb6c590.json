{"ast":null,"code":"import _classCallCheck from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/src/components/Album.js\";\nimport React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nimport '../style/Album.css';\n\nvar Album =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Album, _Component);\n\n  function Album(props) {\n    var _this;\n\n    _classCallCheck(this, Album);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Album).call(this, props));\n    var album = albumData.find(function (album) {\n      return album.slug === _this.props.match.params.slug;\n    });\n    _this.state = {\n      album: album,\n      currentSong: album.songs[0],\n      currentTime: 0,\n      duration: album.songs[0].duration,\n      volume: false,\n      isPlaying: false,\n      isHovered: false\n    };\n    _this.audioElement = document.createElement('audio');\n    _this.audioElement.src = album.songs[0].audioSrc;\n    _this.audioElement.volume = _this.state.volume;\n    return _this;\n  }\n\n  _createClass(Album, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.eventListeners = {\n        timeupdate: function timeupdate(e) {\n          _this2.setState({\n            currentTime: _this2.audioElement.currentTime\n          });\n        },\n        durationchange: function durationchange(e) {\n          _this2.setState({\n            duration: _this2.audioElement.duration\n          });\n        }\n      };\n      this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.addEventListener('durationchange', this.eventListeners.durationchange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.audioElement.src = null;\n      this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.removeEventListener('duration', this.eventListeners.duration);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.audioElement.play();\n      this.setState({\n        isPlaying: true\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.audioElement.pause();\n      this.setState({\n        isPlaying: false\n      });\n    }\n  }, {\n    key: \"setSong\",\n    value: function setSong(song) {\n      this.audioElement.src = song.audioSrc;\n      this.setState({\n        currentSong: song\n      });\n    }\n  }, {\n    key: \"handleSongClick\",\n    value: function handleSongClick(song) {\n      var isSameSong = this.state.currentSong === song;\n\n      if (this.state.isPlaying && isSameSong) {\n        this.pause();\n      } else {\n        if (!isSameSong) {\n          this.setSong(song);\n        }\n\n        this.play();\n      }\n    }\n  }, {\n    key: \"handlePrevClick\",\n    value: function handlePrevClick() {\n      var _this3 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this3.state.currentSong === song;\n      });\n      var newIndex = Math.max(0, currentIndex - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play(newSong);\n    }\n  }, {\n    key: \"handleNextClick\",\n    value: function handleNextClick() {\n      var _this4 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this4.state.currentSong === song;\n      });\n      var newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play(newSong);\n    }\n  }, {\n    key: \"handleTimeChange\",\n    value: function handleTimeChange(e) {\n      var newTime = this.audioElement.duration * e.target.value;\n      this.audioElement.currentTime = newTime;\n      this.setState({\n        currentTime: newTime\n      });\n    }\n  }, {\n    key: \"handleVolumeChange\",\n    value: function handleVolumeChange(e) {\n      var newVolume = e.target.value;\n      this.audioElement.volume = newVolume;\n      this.setState({\n        volume: newVolume\n      });\n    }\n  }, {\n    key: \"formatTime\",\n    value: function formatTime(time) {\n      return time ? \"\".concat(Math.floor(time / 60), \":\").concat(Number(time % 60 / 100).toFixed(2).substr(2, 3)) : '-:--';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$state$album = this.state.album,\n          albumCover = _this$state$album.albumCover,\n          title = _this$state$album.title,\n          artist = _this$state$album.artist,\n          releaseInfo = _this$state$album.releaseInfo,\n          songs = _this$state$album.songs;\n      return React.createElement(\"div\", {\n        className: \"album\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        id: \"song-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"colgroup\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"col\", {\n        id: \"song-number-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-title-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-duration-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, songs.map(function (song, i) {\n        return React.createElement(\"tr\", {\n          className: \"song\",\n          key: title + song + i,\n          onClick: function onClick() {\n            return _this5.handleSongClick(song);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this5.setState({\n              isHovered: i + 1\n            });\n          },\n          onMouseLeave: function onMouseLeave() {\n            return _this5.setState({\n              isHovered: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"song-actions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, _this5.state.currentSong.title === song.title ? React.createElement(\"ion-icon\", {\n          name: _this5.state.isPlaying ? \"pause\" : \"play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }) : _this5.state.isHovered === i + 1 ? React.createElement(\"ion-icon\", {\n          name: \"play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }) : React.createElement(\"span\", {\n          className: \"song-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, i + 1))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, song.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, _this5.formatTime(song.duration)));\n      }))), React.createElement(\"div\", {\n        id: \"album-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"album-cover-art\",\n        src: albumCover,\n        alt: \"cover art\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"album-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"artist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, artist, \" - \"), React.createElement(\"h2\", {\n        id: \"album-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, title), React.createElement(\"div\", {\n        id: \"release-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, releaseInfo))), React.createElement(PlayerBar, {\n        className: \"pb\",\n        isPlaying: this.state.isPlaying,\n        currentSong: this.state.currentSong,\n        currentTime: this.state.currentTime,\n        duration: this.audioElement.duration,\n        handleSongClick: function handleSongClick() {\n          return _this5.handleSongClick(_this5.state.currentSong);\n        },\n        handlePrevClick: function handlePrevClick() {\n          return _this5.handlePrevClick();\n        },\n        handleNextClick: function handleNextClick() {\n          return _this5.handleNextClick();\n        },\n        handleTimeChange: function handleTimeChange(e) {\n          return _this5.handleTimeChange(e);\n        },\n        handleVolumeChange: function handleVolumeChange(e) {\n          return _this5.handleVolumeChange(e);\n        },\n        formatTime: function formatTime(time) {\n          return _this5.formatTime(time);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Album;\n}(Component);\n\nexport default Album;","map":{"version":3,"sources":["/home/blaze/Dropbox/Portfolio-Projects/react-music-player/src/components/Album.js"],"names":["React","Component","albumData","PlayerBar","Album","props","album","find","slug","match","params","state","currentSong","songs","currentTime","duration","volume","isPlaying","isHovered","audioElement","document","createElement","src","audioSrc","eventListeners","timeupdate","e","setState","durationchange","addEventListener","removeEventListener","play","pause","song","isSameSong","setSong","currentIndex","findIndex","newIndex","Math","max","newSong","min","length","newTime","target","value","newVolume","time","floor","Number","toFixed","substr","albumCover","title","artist","releaseInfo","map","i","handleSongClick","formatTime","handlePrevClick","handleNextClick","handleTimeChange","handleVolumeChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nimport '../style/Album.css';\n\nclass Album extends Component {\n  constructor(props) {\n    super(props);\n    const album = albumData.find( album => album.slug === this.props.match.params.slug);\n\n    this.state = {\n        album: album,\n        currentSong: album.songs[0],\n        currentTime: 0,\n        duration: album.songs[0].duration,\n        volume: false,\n        isPlaying: false,\n\t\t\t\tisHovered: false\n    }\n\n    this.audioElement = document.createElement('audio');\n    this.audioElement.src = album.songs[0].audioSrc;\n    this.audioElement.volume = this.state.volume;\n  }\n\n  componentDidMount() {\n    this.eventListeners = {\n      timeupdate: e => {\n        this.setState({ currentTime: this.audioElement.currentTime });\n      },\n      durationchange: e => {\n        this.setState({ duration: this.audioElement.duration });\n      }\n    }\n\n    this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.addEventListener('durationchange', this.eventListeners.durationchange);\n  }\n\n  componentWillUnmount() {\n    this.audioElement.src = null;\n    this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.removeEventListener('duration', this.eventListeners.duration);\n  }\n\n  play() {\n    this.audioElement.play();\n    this.setState({ isPlaying: true });\n  }\n\n  pause() {\n    this.audioElement.pause();\n    this.setState({ isPlaying: false });\n  }\n\n  setSong(song) {\n    this.audioElement.src = song.audioSrc;\n    this.setState({ currentSong: song });\n  }\n\n  handleSongClick(song) {\n    const isSameSong = this.state.currentSong === song;\n    if (this.state.isPlaying && isSameSong) {\n      this.pause()\n    } else {\n      if (!isSameSong) { this.setSong(song); }\n      this.play();\n    }\n  }\n\n  handlePrevClick() {\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.max(0, currentIndex - 1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play(newSong);\n  }\n\n  handleNextClick() {\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play(newSong);\n  }\n\n  handleTimeChange(e) {\n    const newTime = this.audioElement.duration * e.target.value;\n    this.audioElement.currentTime = newTime;\n    this.setState({ currentTime: newTime });\n  }\n\n  handleVolumeChange(e) {\n    const newVolume = e.target.value;\n    this.audioElement.volume = newVolume;\n    this.setState({ volume: newVolume });\n  }\n\n  formatTime(time) {\n    return time ? `${Math.floor(time / 60)}:${Number(time % 60 / 100).toFixed(2).substr(2,3)}` : '-:--';\n  }\n\n  render() {\n    const { albumCover, title, artist, releaseInfo, songs } = this.state.album;\n\n    return (\n      <div className=\"album\">\n        <table id=\"song-list\">\n          <colgroup>\n            <col id=\"song-number-column\" />\n            <col id=\"song-title-column\" />\n            <col id=\"song-duration-column\" />\n          </colgroup>\n          <tbody>\n            {\n              songs.map( (song, i) =>\n                <tr className=\"song\"\n\t\t\t\t\t\t\t\t\t\tkey={title + song + i}\n\t\t\t\t\t\t\t\t\t\tonClick={() => this.handleSongClick(song)}\n\t\t\t\t\t\t\t\t\t\tonMouseEnter={() => this.setState({isHovered: i + 1})}\n\t                  onMouseLeave={() => this.setState({isHovered: false})}>\n\t                  <td className=\"song-actions\">\n\t                    <button>\n\t                      {\n\t                        (this.state.currentSong.title === song.title) ?\n\t                        <ion-icon name={this.state.isPlaying ? \"pause\" : \"play\"}></ion-icon> :\n\t                        (this.state.isHovered === i + 1) ?\n\t                        <ion-icon name=\"play\"></ion-icon> :\n\t                        <span className=\"song-number\">{i + 1}</span>\n\t                      }\n\t                    </button>\n\t                  </td>\n                  <td>{song.title}</td>\n                  <td>{this.formatTime(song.duration)}</td>\n                </tr>)\n            }\n          </tbody>\n        </table>\n\t\t\t\t<div id=\"album-info\">\n\t\t\t\t\t<img id=\"album-cover-art\" src={albumCover} alt='cover art' />\n\t\t\t\t\t<div className=\"album-details\">\n\t\t\t\t\t\t<h2 className=\"artist\">{artist} - </h2>\n\t\t\t\t\t\t<h2 id=\"album-title\">{title}</h2>\n\t\t\t\t\t\t<div id=\"release-info\">{releaseInfo}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n        <PlayerBar\n\t\t\t\t\tclassName=\"pb\"\n          isPlaying={this.state.isPlaying}\n          currentSong={this.state.currentSong}\n          currentTime={this.state.currentTime}\n          duration={this.audioElement.duration}\n          handleSongClick={() => this.handleSongClick(this.state.currentSong)}\n          handlePrevClick = {() => this.handlePrevClick()}\n          handleNextClick = {() => this.handleNextClick()}\n          handleTimeChange = {(e) => this.handleTimeChange(e)}\n          handleVolumeChange = {(e) => this.handleVolumeChange(e)}\n          formatTime = {(time) => this.formatTime(time)}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}