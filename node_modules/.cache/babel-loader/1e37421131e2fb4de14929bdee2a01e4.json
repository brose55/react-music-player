{"ast":null,"code":"import _classCallCheck from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/blaze/Dropbox/Portfolio-Projects/react-music-player/src/components/Album.js\";\nimport React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nimport '../style/Album.css'; // Todo add play and pause ionicons\n// look up their guide\n\nvar Album =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Album, _Component);\n\n  function Album(props) {\n    var _this;\n\n    _classCallCheck(this, Album);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Album).call(this, props));\n    var album = albumData.find(function (album) {\n      return album.slug === _this.props.match.params.slug;\n    });\n    _this.state = {\n      album: album,\n      currentSong: album.songs[0],\n      currentTime: 0,\n      duration: album.songs[0].duration,\n      volume: false,\n      isPlaying: false\n    };\n    _this.audioElement = document.createElement('audio');\n    _this.audioElement.src = album.songs[0].audioSrc;\n    _this.audioElement.volume = _this.state.volume;\n    return _this;\n  }\n\n  _createClass(Album, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.eventListeners = {\n        timeupdate: function timeupdate(e) {\n          _this2.setState({\n            currentTime: _this2.audioElement.currentTime\n          });\n        },\n        durationchange: function durationchange(e) {\n          _this2.setState({\n            duration: _this2.audioElement.duration\n          });\n        }\n      };\n      this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.addEventListener('durationchange', this.eventListeners.durationchange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.audioElement.src = null;\n      this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.removeEventListener('duration', this.eventListeners.duration);\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.audioElement.play();\n      this.setState({\n        isPlaying: true\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.audioElement.pause();\n      this.setState({\n        isPlaying: false\n      });\n    }\n  }, {\n    key: \"setSong\",\n    value: function setSong(song) {\n      this.audioElement.src = song.audioSrc;\n      this.setState({\n        currentSong: song\n      });\n    }\n  }, {\n    key: \"handleSongClick\",\n    value: function handleSongClick(song) {\n      var isSameSong = this.state.currentSong === song;\n\n      if (this.state.isPlaying && isSameSong) {\n        this.pause();\n      } else {\n        if (!isSameSong) {\n          this.setSong(song);\n        }\n\n        this.play();\n      }\n    }\n  }, {\n    key: \"handlePrevClick\",\n    value: function handlePrevClick() {\n      var _this3 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this3.state.currentSong === song;\n      });\n      var newIndex = Math.max(0, currentIndex - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play(newSong);\n    }\n  }, {\n    key: \"handleNextClick\",\n    value: function handleNextClick() {\n      var _this4 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this4.state.currentSong === song;\n      });\n      var newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play(newSong);\n    }\n  }, {\n    key: \"handleTimeChange\",\n    value: function handleTimeChange(e) {\n      var newTime = this.audioElement.duration * e.target.value;\n      this.audioElement.currentTime = newTime;\n      this.setState({\n        currentTime: newTime\n      });\n    }\n  }, {\n    key: \"handleVolumeChange\",\n    value: function handleVolumeChange(e) {\n      var newVolume = e.target.value;\n      this.audioElement.volume = newVolume;\n      this.setState({\n        volume: newVolume\n      });\n    }\n  }, {\n    key: \"formatTime\",\n    value: function formatTime(time) {\n      return time ? \"\".concat(Math.floor(time / 60), \":\").concat(Number(time % 60 / 100).toFixed(2).substr(2, 3)) : '-:--';\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$state$album = this.state.album,\n          albumCover = _this$state$album.albumCover,\n          title = _this$state$album.title,\n          artist = _this$state$album.artist,\n          releaseInfo = _this$state$album.releaseInfo,\n          songs = _this$state$album.songs;\n      return React.createElement(\"div\", {\n        className: \"album\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"album-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"album-cover-art\",\n        src: albumCover,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"album-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"album-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, title), React.createElement(\"h2\", {\n        className: \"artist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, artist), React.createElement(\"div\", {\n        id: \"release-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, releaseInfo))), React.createElement(\"table\", {\n        id: \"song-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"colgroup\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"col\", {\n        id: \"song-number-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-title-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-duration-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      })), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, songs.map(function (song, i) {\n        return React.createElement(\"tr\", {\n          className: \"song\",\n          key: title + song + i,\n          onClick: function onClick() {\n            return _this5.handleSongClick(song);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"song-actions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, i + 1), React.createElement(\"ion-icon\", {\n          name: \"play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }), React.createElement(\"ion-icon\", {\n          name: \"pause\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, song.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, song.duration));\n      }))), React.createElement(PlayerBar, {\n        isPlaying: this.state.isPlaying,\n        currentSong: this.state.currentSong,\n        currentTime: this.state.currentTime,\n        duration: this.audioElement.duration,\n        handleSongClick: function handleSongClick() {\n          return _this5.handleSongClick(_this5.state.currentSong);\n        },\n        handlePrevClick: function handlePrevClick() {\n          return _this5.handlePrevClick();\n        },\n        handleNextClick: function handleNextClick() {\n          return _this5.handleNextClick();\n        },\n        handleTimeChange: function handleTimeChange(e) {\n          return _this5.handleTimeChange(e);\n        },\n        handleVolumeChange: function handleVolumeChange(e) {\n          return _this5.handleVolumeChange(e);\n        },\n        formatTime: function formatTime(time) {\n          return _this5.formatTime(time);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Album;\n}(Component);\n\nexport default Album;","map":{"version":3,"sources":["/home/blaze/Dropbox/Portfolio-Projects/react-music-player/src/components/Album.js"],"names":["React","Component","albumData","PlayerBar","Album","props","album","find","slug","match","params","state","currentSong","songs","currentTime","duration","volume","isPlaying","audioElement","document","createElement","src","audioSrc","eventListeners","timeupdate","e","setState","durationchange","addEventListener","removeEventListener","play","pause","song","isSameSong","setSong","currentIndex","findIndex","newIndex","Math","max","newSong","min","length","newTime","target","value","newVolume","time","floor","Number","toFixed","substr","albumCover","title","artist","releaseInfo","map","i","handleSongClick","handlePrevClick","handleNextClick","handleTimeChange","handleVolumeChange","formatTime"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nimport '../style/Album.css';\n\n// Todo add play and pause ionicons\n// look up their guide\n\nclass Album extends Component {\n  constructor(props) {\n    super(props);\n    const album = albumData.find( album => album.slug === this.props.match.params.slug);\n\n    this.state = {\n        album: album,\n        currentSong: album.songs[0],\n        currentTime: 0,\n        duration: album.songs[0].duration,\n        volume: false,\n        isPlaying: false\n    }\n\n    this.audioElement = document.createElement('audio');\n    this.audioElement.src = album.songs[0].audioSrc;\n    this.audioElement.volume = this.state.volume;\n  }\n\n  componentDidMount() {\n    this.eventListeners = {\n      timeupdate: e => {\n        this.setState({ currentTime: this.audioElement.currentTime });\n      },\n      durationchange: e => {\n        this.setState({ duration: this.audioElement.duration });\n      }\n    }\n\n    this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.addEventListener('durationchange', this.eventListeners.durationchange);\n  }\n\n  componentWillUnmount() {\n    this.audioElement.src = null;\n    this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.removeEventListener('duration', this.eventListeners.duration);\n  }\n\n  play() {\n    this.audioElement.play();\n    this.setState({ isPlaying: true });\n  }\n\n  pause() {\n    this.audioElement.pause();\n    this.setState({ isPlaying: false });\n  }\n\n  setSong(song) {\n    this.audioElement.src = song.audioSrc;\n    this.setState({ currentSong: song });\n  }\n\n  handleSongClick(song) {\n    const isSameSong = this.state.currentSong === song;\n    if (this.state.isPlaying && isSameSong) {\n      this.pause()\n    } else {\n      if (!isSameSong) { this.setSong(song); }\n      this.play();\n    }\n  }\n\n  handlePrevClick() {\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.max(0, currentIndex - 1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play(newSong);\n  }\n\n  handleNextClick() {\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play(newSong);\n  }\n\n  handleTimeChange(e) {\n    const newTime = this.audioElement.duration * e.target.value;\n    this.audioElement.currentTime = newTime;\n    this.setState({ currentTime: newTime });\n  }\n\n  handleVolumeChange(e) {\n    const newVolume = e.target.value;\n    this.audioElement.volume = newVolume;\n    this.setState({ volume: newVolume });\n  }\n\n  formatTime(time) {\n    return time ? `${Math.floor(time / 60)}:${Number(time % 60 / 100).toFixed(2).substr(2,3)}` : '-:--';\n  }\n\n  render() {\n    const { albumCover, title, artist, releaseInfo, songs } = this.state.album;\n\n    return (\n      <div className=\"album\">\n        <div id=\"album-info\">\n          <img id=\"album-cover-art\" src={albumCover} alt=\n          '' />\n          <div className=\"album-details\">\n            <h1 id=\"album-title\">{title}</h1>\n            <h2 className=\"artist\">{artist}</h2>\n            <div id=\"release-info\">{releaseInfo}</div>\n          </div>\n        </div>\n        <table id=\"song-list\">\n          <colgroup>\n            <col id=\"song-number-column\" />\n            <col id=\"song-title-column\" />\n            <col id=\"song-duration-column\" />\n          </colgroup>\n          <tbody>\n            {\n              songs.map( (song, i) =>\n                <tr className=\"song\" key={title + song + i} onClick={() => this.handleSongClick(song)}>\n\n                  <td className=\"song-actions\">\n                    <button>\n                      <span>{i + 1}</span>\n                      <ion-icon name=\"play\"></ion-icon>\n                      <ion-icon name=\"pause\"></ion-icon>\n                    </button>\n                  </td>\n                  <td>{song.title}</td>\n                  <td>{song.duration}</td>\n                </tr>)\n            }\n          </tbody>\n        </table>\n        <PlayerBar\n          isPlaying={this.state.isPlaying}\n          currentSong={this.state.currentSong}\n          currentTime={this.state.currentTime}\n          duration={this.audioElement.duration}\n          handleSongClick={() => this.handleSongClick(this.state.currentSong)}\n          handlePrevClick = {() => this.handlePrevClick()}\n          handleNextClick = {() => this.handleNextClick()}\n          handleTimeChange = {(e) => this.handleTimeChange(e)}\n          handleVolumeChange = {(e) => this.handleVolumeChange(e)}\n          formatTime = {(time) => this.formatTime(time)}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}